<!doctype html>
<head>
  <meta charset="utf-8">

  <title>Pxlr</title>
  <meta name="description" content="Pxlr">
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/styles.css">
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.3.4.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0/handlebars.min.js"></script>
</head>

<body>
  <div id="main-content"></div>
  <script id="login-tmpl" type="text/x-handlebars-template">
    <form>
      <label>Log In</label>
      <input type="text" placeholder="Username" id="username"/>
      <input type="password" placeholder="Password" id="password"/>
      <input type="button" value="Log In" class="login" />
    </form>
  </script>
  <script id="signup-tmpl" type="text/x-handlebars-template">
    <form>
      <label>Sign Up</label>
      <input type="text" placeholder="Username" id="username"/>
      <input type="password" placeholder="Password" id="password"/>
      <input type="text" placeholder="Email" id="email"/>
      <input type="button" value="Sign Up" class="signup" />
    </form>
  </script>
  <script type="text/javascript">
    Parse.initialize("Vkpq2oBMIwW9UZNKC7allpH0r5opokYORviRnO8Z", "PJWGAxUyHLWHspauri9KVk9DhRuGo8D8AkptKvv5");

    var LoginView = Parse.View.extend({
      template: Handlebars.compile($('#login-tmpl').html()),
      events: {
        'click .login' : 'logIn'
      },

      logIn: function() {
        var username = $('#username').val();
        var password = $('#password').val();

        var user = new Parse.User();

        user.set('username', username);
        user.set('password', password);

        user.logIn().then(function() {
          console.log('success!');
        }).fail(function() {
          console.log('failed.');
        });
      },

      render: function() {
        this.$el.html(this.template());
        return this;
      }
    });

    var SignUpView = Parse.View.extend({
      template: Handlebars.compile($('#signup-tmpl').html()),
      events: {
        'click .signup' : 'signUp'
      },

      signUp: function() {
        var username = $('#username').val();
        var password = $('#password').val();
        var email = $('#email').val();

        var user = new Parse.User();
        user.set('username', username);
        user.set('password', password);
        user.set('email', email)

        user.signUp().then(function() {
          console.log('success!');
        }).fail(function() {
          console.log('failed!');
        });
      },

      render: function() {
        this.$el.html(this.template());
        return this;
      }
    });


    var view = new LoginView();
    $('#main-content').html(view.render().el);
  </script>
</body>
</html>
